{% load static %}

<html>

<head>
    <meta charset="UTF-8">

    <!-- 引入jQuery -->
    <script type="text/javascript" src="{% static 'js/jquery-3.3.1.min.js' %}"></script>

    <!-- 引入 Bootstrap -->
    <link href="{% static 'bootstrap/css/bootstrap.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'bootstrap/css/bootstrap-theme.css' %}" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.js' %}"></script>

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <title>测试平台</title>
</head>
<body>


<div class="main-content">
    <h2>Article</h2>
    <img id="qrcode" src="/static/wx_login/qrcode.jpg" alt="二维码" width="400px">

    <button id="login_status" onclick="login_status()">检查是否登陆中</button>
    <button id="refresh_qrcode" onclick="refresh_qrcode()">刷新二维码</button>
    <button id="login" onclick="login()">登陆</button>
    <button id="logout" onclick="logout()">登出</button>
</div>

</body>
<script type="text/javascript">

    login_status=function () {
        $.ajax({
             type: "GET",
             url: "http://127.0.0.1:8000/login_status/",
             data: "",
             dataType: "text",
             success: function(data) {
                alert(data);
             }
         });
    }

    refresh_qrcode=function () {
        $("#qrcode").attr("src","/static/wx_login/qrcode.jpg?"+Math.random());
    }

    login=function(){
        $.ajax({
             type: "GET",
             url: "http://127.0.0.1:8000/login/",
             data: "",
             dataType: "text",
             success: function(data) {
                alert(data);
             }
         });
    }

    logout=function(){
        $.ajax({
             type: "GET",
             url: "http://127.0.0.1:8000/logout/",
             data: "",
             dataType: "text",
             success: function(data) {
                alert(data);
             }
         });
    }

</script>

</html>